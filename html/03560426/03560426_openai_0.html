<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>03560426</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      main {
        display: block;
      }
      .pair {
        display: flex;
      }
      .container {
        position: relative;
        height: 30px;
        width: 30px;
        background-color: #c2c0c0;
        margin: 0px;
        padding: 0px;
      }
      .grid {
        position: relative;
        background-color: #111111;
        max-height: 30px;
        max-width: 30px;
      }
      .shape {
        position: absolute;
        background-color: #4FCC30; /* Default color, can be changed later */
      }
    </style>
  </head>
  <body>
    <main id="main"></main>

    <script>
      const colors = [
        "#111111", // black
        "#1E93FF", // blue
        "#F93C31", // red
        "#4FCC30", // green
        "#FFDC00", // yellow
        "#E6E6E6", // grey
        "#E53AA3", // magenta
        "#FF851B", // orange
        "#87D8F1", // light blue
        "#921231", // maroon
      ];

      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function createShape(width, height, bottom) {
        const shape = document.createElement('div');
        shape.classList.add('shape');
        shape.style.width = `${width}px`;
        shape.style.height = `${height}px`;
        shape.style.bottom = `${bottom}px`;
        shape.style.left = `${getRandomInt(0, 30 - width)}px`; // Random horizontal positioning for variety
        shape.style.backgroundColor = colors[getRandomInt(0, colors.length - 1)]; // Random color for visual distinction
        return shape;
      }

      function addShapes(container, pairIndex) {
        const totalWidth = 30;
        let currentWidth = 0;
        let bottom = 0;

        // Add shapes to bottom of the container
        while (currentWidth < totalWidth) {
          const width = getRandomInt(2, 5);
          const height = getRandomInt(1, 3);
          if (currentWidth + width > totalWidth) break;

          const shape = createShape(width, height, bottom);
          shape.setAttribute(`data-pair-${pairIndex}`, 'input');

          container.appendChild(shape);
          currentWidth += width + 1; // Include 1px space between shapes
        }
      }

      function repositionShapes(inputContainer, outputContainer, pairIndex) {
        const shapes = inputContainer.querySelectorAll(`.shape[data-pair-${pairIndex}="input"]`);
        
        let offsetX = 0;
        let offsetY = 0;
        
        shapes.forEach((shape, idx) => {
          const width = shape.offsetWidth;
          const height = shape.offsetHeight;

          const newShape = createShape(width, height, 0);
          newShape.style.top = `${offsetY}px`;
          newShape.style.left = `${offsetX}px`;
          offsetX = newShape.offsetLeft + width - 1;
          offsetY = newShape.offsetTop - 1;

          outputContainer.appendChild(newShape);
        });
      }

      function createPair(index) {
        const pair = document.createElement('div');
        pair.classList.add('pair');

        const inputContainer = document.createElement('div');
        inputContainer.classList.add('container');

        const inputGrid = document.createElement('div');
        inputGrid.id = `input-${index}`;
        inputGrid.classList.add('grid');
        inputContainer.appendChild(inputGrid);

        const outputContainer = document.createElement('div');
        outputContainer.classList.add('container');

        const outputGrid = document.createElement('div');
        outputGrid.id = `output-${index}`;
        outputGrid.classList.add('grid');
        outputContainer.appendChild(outputGrid);

        pair.appendChild(inputContainer);
        pair.appendChild(outputContainer);

        addShapes(inputGrid, index);
        repositionShapes(inputGrid, outputGrid, index);

        return pair;
      }

      function initializePairs() {
        const main = document.getElementById('main');
        const numberOfPairs = getRandomInt(2, 5);
        for (let i = 1; i <= numberOfPairs; i++) {
          const pair = createPair(i);
          main.appendChild(pair);
        }
      }

      document.addEventListener('DOMContentLoaded', (event) => {
        initializePairs();
      });
    </script>
  </body>
</html>