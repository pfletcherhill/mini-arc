Here is the updated HTML document for puzzle 0a1d4ef5:

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>0a1d4ef5</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      main {
        display: block;
      }
      .pair {
        display: flex;
      }
      .container {
        position: relative;
        height: 30px;
        width: 30px;
        background-color: #c2c0c0;
        margin: 0px;
        padding: 0px;
      }
      .grid {
        position: relative;
        background-color: #111111;
        max-height: 30px;
        max-width: 30px;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <main>
      <!-- Pairs will be dynamically added here -->
    </main>

    <script>
      const colors = [
        "#111111", // black
        "#1E93FF", // blue
        "#F93C31", // red
        "#4FCC30", // green
        "#FFDC00", // yellow
        "#E6E6E6", // grey
        "#E53AA3", // magenta
        "#FF851B", // orange
        "#87D8F1", // light blue
        "#921231", // maroon
      ];

      const main = document.querySelector('main');
      const numPairs = Math.floor(Math.random() * 4) + 2; // Random number of pairs between 2-5

      for (let i = 1; i <= numPairs; i++) {
        const pair = document.createElement('div');
        pair.classList.add('pair');

        const inputContainer = document.createElement('div');
        inputContainer.classList.add('container');
        const inputGrid = document.createElement('div');
        inputGrid.id = `input-${i}`;
        inputGrid.classList.add('grid');
        inputContainer.appendChild(inputGrid);
        pair.appendChild(inputContainer);

        const outputContainer = document.createElement('div');
        outputContainer.classList.add('container');
        const outputGrid = document.createElement('div');
        outputGrid.id = `output-${i}`;
        outputGrid.classList.add('grid');
        outputContainer.appendChild(outputGrid);
        pair.appendChild(outputContainer);

        main.appendChild(pair);

        // Generate input grid
        const inputSize = Math.floor(Math.random() * 19) + 12; // Random size between 12x12 and 30x30
        inputGrid.style.width = `${inputSize}px`;
        inputGrid.style.height = `${inputSize}px`;

        const bgColors = colors.slice(0, Math.floor(Math.random() * 2) + 2); // Pick 2-3 background colors
        const fgColors = colors.filter(color => !bgColors.includes(color)); // Remaining colors are foreground colors

        // Draw random background pattern
        for (let y = 0; y < inputSize; y++) {
          for (let x = 0; x < inputSize; x++) {
            const pixel = document.createElement('div');
            pixel.style.position = 'absolute';
            pixel.style.left = `${x}px`;
            pixel.style.top = `${y}px`;
            pixel.style.width = '1px';
            pixel.style.height = '1px';
            pixel.style.backgroundColor = bgColors[Math.floor(Math.random() * bgColors.length)];
            inputGrid.appendChild(pixel);
          }
        }

        // Create foreground table
        const numCols = Math.floor(Math.random() * 3) + 2; // Random number of columns between 2-4
        const numRows = Math.floor(Math.random() * 3) + 2; // Random number of rows between 2-4
        const colWidth = Math.floor(Math.random() * 6) + 5; // Random column width between 5-10px
        const rowHeight = Math.floor(Math.random() * 6) + 5; // Random row height between 5-10px
        const cellColors = []; // Store the color of each cell's rectangle

        for (let r = 0; r < numRows; r++) {
          for (let c = 0; c < numCols; c++) {
            const cell = document.createElement('div');
            cell.style.position = 'absolute';
            cell.style.left = `${c * (colWidth + 1)}px`;
            cell.style.top = `${r * (rowHeight + 1)}px`;
            cell.style.width = `${colWidth}px`;
            cell.style.height = `${rowHeight}px`;
            inputGrid.appendChild(cell);

            const rectSize = Math.floor(Math.random() * 8) + 3; // Random rectangle size between 3x3 and 10x10
            const rectColor = fgColors[Math.floor(Math.random() * fgColors.length)];
            cellColors.push(rectColor);

            const rect = document.createElement('div');
            rect.style.position = 'absolute';
            rect.style.left = `${Math.floor((colWidth - rectSize) / 2)}px`;
            rect.style.top = `${Math.floor((rowHeight - rectSize) / 2)}px`;
            rect.style.width = `${rectSize}px`;
            rect.style.height = `${rectSize}px`;
            rect.style.backgroundColor = rectColor;
            cell.appendChild(rect);
          }
        }

        // Generate output grid
        outputGrid.style.width = `${numCols}px`;
        outputGrid.style.height = `${numRows}px`;

        for (let r = 0; r < numRows; r++) {
          for (let c = 0; c < numCols; c++) {
            const pixel = document.createElement('div');
            pixel.style.position = 'absolute';
            pixel.style.left = `${c}px`;
            pixel.style.top = `${r}px`;
            pixel.style.width = '1px';
            pixel.style.height = '1px';
            pixel.style.backgroundColor = cellColors[r * numCols + c];
            outputGrid.appendChild(pixel);
          }
        }
      }
    </script>
  </body>
</html>