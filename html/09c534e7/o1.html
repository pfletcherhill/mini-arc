<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>09c534e7</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      main {
        display: block;
      }
      .pair {
        display: flex;
      }
      .container {
        position: relative;
        height: 30px;
        width: 30px;
        background-color: #c2c0c0;
        margin: 0px;
        padding: 0px;
      }
      .grid {
        position: relative;
        max-height: 30px;
        max-width: 30px;
        overflow: hidden;
      }
      .rectangle {
        position: absolute;
        border: 1px solid;
      }
      .line {
        position: absolute;
        background-color: black;
      }
      .dot {
        position: absolute;
        width: 1px;
        height: 1px;
      }
    </style>
  </head>
  <body>
    <main id="puzzleContainer">
      <!-- Pairs will be dynamically added here -->
    </main>

    <script>
      const colors = [
        "#111111", // black
        "#1E93FF", // blue
        "#F93C31", // red
        "#4FCC30", // green
        "#FFDC00", // yellow
        "#E6E6E6", // grey
        "#E53AA3", // magenta
        "#FF851B", // orange
        "#87D8F1", // light blue
        "#921231", // maroon
      ];

      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function getRandomColor(excludeColor) {
        let availableColors = colors.filter((color) => color !== excludeColor);
        return availableColors[
          Math.floor(Math.random() * availableColors.length)
        ];
      }

      function createPair(pairIndex) {
        const pair = document.createElement("div");
        pair.className = "pair";
        pair.innerHTML = `
          <div class="container">
            <div id="input-${pairIndex}" class="grid"></div>
          </div>
          <div class="container">
            <div id="output-${pairIndex}" class="grid"></div>
          </div>
        `;
        return pair;
      }

      function createRectangle(x, y, width, height, color, fill = false) {
        const rect = document.createElement("div");
        rect.className = "rectangle";
        rect.style.left = `${x}px`;
        rect.style.top = `${y}px`;
        rect.style.width = `${width}px`;
        rect.style.height = `${height}px`;
        rect.style.borderColor = color;
        if (fill) {
          rect.style.backgroundColor = color;
        }
        return rect;
      }

      function createLine(x1, y1, x2, y2, color) {
        const line = document.createElement("div");
        line.className = "line";
        line.style.backgroundColor = color;

        if (x1 === x2) {
          // vertical line
          line.style.width = "1px";
          line.style.height = `${Math.abs(y2 - y1) + 1}px`;
          line.style.left = `${x1}px`;
          line.style.top = `${Math.min(y1, y2)}px`;
        } else {
          // horizontal line
          line.style.height = "1px";
          line.style.width = `${Math.abs(x2 - x1) + 1}px`;
          line.style.left = `${Math.min(x1, x2)}px`;
          line.style.top = `${y1}px`;
        }

        return line;
      }

      function createGrid(gridId, isOutput) {
        const grid = document.getElementById(gridId);
        const width = getRandomInt(15, 30);
        const height = getRandomInt(15, 30);
        grid.style.width = `${width}px`;
        grid.style.height = `${height}px`;

        const backgroundColor = getRandomColor();
        const drawingColor = getRandomColor(backgroundColor);
        grid.style.backgroundColor = backgroundColor;

        const numGroups = getRandomInt(2, 4);
        const groups = [];

        for (let i = 0; i < numGroups; i++) {
          const group = [];
          const numRectangles = getRandomInt(2, 4);
          const groupColor = getRandomColor(drawingColor);

          for (let j = 0; j < numRectangles; j++) {
            let rectWidth, rectHeight, rectX, rectY;
            do {
              rectWidth = getRandomInt(3, Math.min(8, width / 2));
              rectHeight = getRandomInt(3, Math.min(8, height / 2));
              rectX = getRandomInt(0, width - rectWidth);
              rectY = getRandomInt(0, height - rectHeight);
            } while (
              groups.some((g) =>
                g.some(
                  (r) =>
                    rectX < r.x + r.width + 1 &&
                    rectX + rectWidth > r.x - 1 &&
                    rectY < r.y + r.height + 1 &&
                    rectY + rectHeight > r.y - 1
                )
              )
            );

            const rect = {
              x: rectX,
              y: rectY,
              width: rectWidth,
              height: rectHeight,
            };
            group.push(rect);

            const rectElement = createRectangle(
              rectX,
              rectY,
              rectWidth,
              rectHeight,
              drawingColor,
              isOutput ? groupColor : false
            );
            grid.appendChild(rectElement);

            if (j > 0) {
              const prevRect = group[j - 1];
              const lineX1 = prevRect.x + Math.floor(prevRect.width / 2);
              const lineY1 = prevRect.y + Math.floor(prevRect.height / 2);
              const lineX2 = rectX + Math.floor(rectWidth / 2);
              const lineY2 = rectY + Math.floor(rectHeight / 2);

              // Create horizontal and vertical lines
              const horizontalLine = createLine(
                lineX1,
                lineY1,
                lineX2,
                lineY1,
                drawingColor
              );
              const verticalLine = createLine(
                lineX2,
                lineY1,
                lineX2,
                lineY2,
                drawingColor
              );
              grid.appendChild(horizontalLine);
              grid.appendChild(verticalLine);
            }
          }

          if (!isOutput) {
            const randomRect = group[Math.floor(Math.random() * group.length)];
            const dotX = randomRect.x + getRandomInt(1, randomRect.width - 2);
            const dotY = randomRect.y + getRandomInt(1, randomRect.height - 2);
            const dot = document.createElement("div");
            dot.className = "dot";
            dot.style.backgroundColor = groupColor;
            dot.style.left = `${dotX}px`;
            dot.style.top = `${dotY}px`;
            grid.appendChild(dot);
          }

          groups.push(group);
        }
      }

      function initializePuzzle() {
        const container = document.getElementById("puzzleContainer");
        const numPairs = getRandomInt(2, 5);

        for (let i = 1; i <= numPairs; i++) {
          const pair = createPair(i);
          container.appendChild(pair);
          createGrid(`input-${i}`, false);
          createGrid(`output-${i}`, true);
        }
      }

      window.onload = initializePuzzle;
    </script>
  </body>
</html>
